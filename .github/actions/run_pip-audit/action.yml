name: pip-audit
description: pipx run pip-audit
inputs:
  requirements-file:
    description: Path to the requirements file
    required: false
    default: ./requirements.txt

  pip-audit_cli_arguments:
    description: Additional arguments to pass to pip-audit
    required: false
    default: ""

runs:
  using: composite
  steps:
    - name: cat ${{ inputs.requirements-file }}
      shell: bash
      run: cat ${{ inputs.requirements-file }}

    - name: pip-audit -r ${{ inputs.requirements-file }}
      shell: bash
      run: pipx run -- pip-audit --requirement ${{ inputs.requirements-file }} ${{ inputs.pip-audit_cli_arguments }}
